# Junior DevOps — Monitoring & Logging (Подробно)

## 1. Что такое мониторинг

Мониторинг — это сбор, хранение и анализ данных о состоянии инфраструктуры и приложений.

### Цели мониторинга:

* Выявление проблем до того, как они повлияют на пользователей.
* Контроль производительности сервисов.
* Предотвращение простоев и инцидентов.

### Примеры инструментов:

* Prometheus, Zabbix, Nagios, Datadog

**Совет для собеседования:** объясните, что мониторинг — это не только сбор метрик, но и визуализация, оповещения и анализ исторических данных.

---

## 2. Infrastructure vs Application monitoring

**Infrastructure Monitoring:**

* CPU, Memory, Disk, Network
* Инструменты: node_exporter (Prometheus), Telegraf

**Application Monitoring:**

* Метрики приложения: ошибки, время ответа, количество запросов
* Инструменты: APM (NewRelic, Datadog), Prometheus client libraries

**Совет:** Junior DevOps должен уметь отличать инфраструктурные и прикладные метрики и приводить примеры.

---

## 3. Основные метрики

* **CPU usage** — загрузка процессора
* **Memory usage** — использование памяти
* **Disk I/O** — скорость чтения/записи
* **Network throughput** — пропускная способность сети
* **Error rate** — количество ошибок приложения
* **Latency** — задержка отклика

**Пример:** 95-й процентиль latency используется для оценки реального пользовательского опыта.

---

## 4. Pull vs Push модели

* **Pull:** мониторинговая система опрашивает endpoints (например, Prometheus)
* **Push:** агенты отправляют данные на сервер (например, Pushgateway)

**Важно:** Junior DevOps должен уметь объяснить разницу и сценарии применения.

---

## 5. Black box vs White box monitoring

* **Black box:** тестирование системы снаружи, проверка доступности и функционала (ping, http request)
* **White box:** сбор внутренних метрик и состояния приложения/сервера

**Совет:** на собеседовании можно упомянуть, что для комплексного мониторинга используют оба подхода.

---

## 6. Логи и их сбор

**Зачем нужны логи:**

* Диагностика проблем
* Аудит и расследование инцидентов

**Инструменты для сбора:**

* Filebeat, Fluentd, Logstash
* Syslog
* Централизованное хранение: Elasticsearch, Loki

---

## 7. Архитектура сбора логов

1. Агент собирает логи с сервера/приложения
2. Логи отправляются в брокер сообщений (Kafka, RabbitMQ)
3. Логи индексируются и сохраняются в Elasticsearch/Loki
4. Dashboards (Grafana/Kibana) визуализируют логи
5. Alerting реагирует на ошибки или аномалии

**Пример:**

> Filebeat собирает логи с веб-сервера, отправляет их в Kafka, где они распределяются по Elasticsearch. Для визуализации используется Kibana, для alerting — Watcher или Prometheus Alertmanager.

---

## 8. SLI / SLO / SLA

* **SLI (Service Level Indicator):** метрика, которая измеряет уровень сервиса (например, latency < 200ms)
* **SLO (Service Level Objective):** целевое значение SLI (например, 99% запросов < 200ms)
* **SLA (Service Level Agreement):** контракт с клиентом, основанный на SLO

**Совет:** Junior DevOps достаточно знать определения и пример использования для отчётности.

---

## 9. Alerting

* Настройка уведомлений при превышении пороговых значений
* Инструменты: Prometheus Alertmanager, Grafana alerts, Datadog

**Совет:** Alerts должны быть релевантными, чтобы не создавать «alert fatigue».

---

## 10. Prometheus long-term storage

* Для хранения больших объёмов метрик используются: Thanos, Cortex, VictoriaMetrics
* Junior DevOps достаточно знать, что такие решения существуют и для чего нужны

---

## 11. Grafana vs Kibana

* **Grafana:** визуализация метрик, создание dashboards, alerting
* **Kibana:** визуализация логов, поиск и фильтрация информации

**Совет:** часто используют вместе — Grafana для метрик, Kibana для логов.

---

## 12. SAAS monitoring

* Готовые облачные решения: Datadog, NewRelic
* Плюсы: быстрое внедрение, удобные дашборды, интеграции
* Минусы: зависимость от провайдера, платные подписки

---

## 13. Best practices для Junior DevOps

* Разделять метрики и логи, чтобы упрощать анализ
* Настраивать alerting на ключевые метрики (CPU, errors, latency)
* Использовать labels/теги для сервисов и окружений
* Понимать уровни мониторинга (infrastructure vs application)
* Понимать основные инструменты (Prometheus, Grafana, Elasticsearch/Kibana)

---

✅ **Итог:** Junior DevOps должен уметь:

* отличать инфраструктурные и прикладные метрики
* описывать pull/push модели и black/white box мониторинг
* настраивать сбор логов и визуализацию
* понимать alerting, SLI/SLO/SLA, и работу с SaaS решениями
